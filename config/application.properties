# Nacos 配置文件 - 生产环境优化版

# 服务器配置
server.contextPath=/nacos
server.servlet.contextPath=/nacos
server.port=8848
server.tomcat.accesslog.enabled=true
server.tomcat.accesslog.pattern=%h %l %u %t "%r" %s %b %D %{User-Agent}i %{Request-Source}i

# 管理端点配置
management.endpoints.web.exposure.include=*
management.metrics.export.prometheus.enabled=true

# 数据库配置
spring.datasource.platform=mysql
db.num=1
db.url.0=jdbc:mysql://192.168.100.11:3306/nacos_config?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai
db.user.0=nacos
db.password.0=nacos123456
db.pool.config.connectionTimeout=3000
db.pool.config.validationTimeout=2000
db.pool.config.maximumPoolSize=50
db.pool.config.minimumIdle=10

# 集群配置
nacos.core.auth.system.type=nacos
nacos.core.auth.enabled=true
nacos.core.auth.default.token.expire.seconds=18000
nacos.core.auth.default.token.secret.key=SecretKey012345678901234567890123456789012345678901234567890123456789
nacos.core.auth.caching.enabled=true
nacos.core.auth.enable.userAgentAuthWhite=false
nacos.core.auth.server.identity.key=nacos
nacos.core.auth.server.identity.value=nacos

# 日志配置
nacos.logs.path=/home/nacos/logs
nacos.logs.level=INFO

# 性能配置
nacos.naming.distro.taskDispatchThreadCount=20
nacos.naming.distro.taskDispatchPeriod=200
nacos.naming.distro.batchSyncKeyCount=2000
nacos.naming.distro.initDataRatio=0.9
nacos.naming.distro.syncRetryDelay=5000
nacos.naming.data.warmup=true
nacos.core.protocol.raft.data.timing.log.interval=10000

# 健康检查配置
nacos.naming.expireInstance=true
nacos.naming.empty-service.auto-clean=true
nacos.naming.empty-service.clean.initial-delay-ms=60000
nacos.naming.empty-service.clean.period-time-ms=30000

# 连接限制
nacos.core.auth.plugin.nacos.token.cache.enable=true
nacos.core.auth.plugin.nacos.token.cache.size=10000
nacos.core.auth.plugin.nacos.token.time.window.seconds=3600

# 集群成员节点之间通信
nacos.core.member.lookup.type=address-server
nacos.member.list=192.168.100.11:8848,192.168.100.12:8848,192.168.100.13:8848

# 配置中心优化
nacos.config.retention.days=30
nacos.config.model=2